<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width">

    <link rel="alternate" type="application/rss+xml" title="Jeremy Tuloup's Blog" href="http://www.jtp.io/feed.xml">

    <title>Jeremy Tuloup's Blog - Puzzle: Pawns on a chessboard</title>

    <link rel="shortcut icon" type="image/png" href="favicon.png"/>

    <!-- Bootstrap core CSS -->
    <link href="//maxcdn.bootstrapcdn.com/bootswatch/3.3.5/yeti/bootstrap.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/stylesheets/styles.css">
    <link rel="stylesheet" href="/stylesheets/pygment_trac.css">

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.3.0/katex.min.css">
    <style>
      .MathJax_Preview { color: #888 }
      .math_finished .MathJax_Preview { display: none }
    </style>

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>

  <body>
    <div id="top" class="container">

<div class="navbar navbar-default">
    <div class="container-fluid">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-responsive-collapse">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">JTP 1/0</a>
  </div>
  <div class="navbar-collapse navbar-responsive-collapse collapse" style="height: 1px;">
    <ul class="nav navbar-nav">
      
        
          
        
          
        
          
        
          
            
              <li><a href="/index.html">Hi</a></li>
            
          
        
      
        
          
            
              <li><a href="/blog.html">Blog</a></li>
            
          
        
          
        
          
        
          
        
      
        
          
        
          
        
          
            
              <li><a href="/gameJams.html">Game Jams</a></li>
            
          
        
          
        
      
        
          
        
          
        
          
        
          
        
      
        
          
        
          
        
          
        
          
        
      
        
          
        
          
        
          
        
          
        
      
        
          
        
          
        
          
        
          
        
      
        
          
        
          
        
          
        
          
        
      
        
          
        
          
        
          
        
          
        
      
        
          
        
          
        
          
        
          
        
      
    </ul>

    <ul class="nav navbar-nav navbar-right">
        <li>
            <a href="https://github.com/jtpio" title="Github"><i class="fa fa-github-square fa-1x"></i></a>
        </li>
        <li>
            <a href="https://twitter.com/jtpio" title="Twitter"><i class="fa fa-twitter-square fa-1x"></i></a>
        </li>
        <li>
        <a href="http://www.linkedin.com/in/jtuloup" title="LinkedIn"><i class="fa fa-linkedin-square fa-1x"></i></a>
        </li>
    </ul>
  </div>
  </div>
</div>


<div class="row">
  <div class="col-md-12 col-xs-18 col-sm-12">
	  <h2> <strong> Puzzle: Pawns on a chessboard </strong> &ndash; August 09, 2015 </h2>
<h4>

	<span class="label label-default">puzzle</span>

	<span class="label label-default">math</span>

	<span class="label label-default">programming</span>

	<span class="label label-default">python</span>

</h4>

<h2 id="introduction">Introduction</h2>
<p>There are times when you need to change ideas and think about something else. In these situations, I like to find a little puzzle, so I can get my mind busy and hopefully solve it.
It doesn’t have to be something very difficult. It is often an high school / undergraduate math exercise, a tricky brain teaser, or a problem involving the use of clever algorithms.</p>

<p>Today’s puzzle comes from the last <a href="https://twitter.com/MathsJam">MathsJam</a> Shout, July 2015 edition, gracefully stated by the peeps from Guildford, UK.</p>

<p>The statement is as follow:</p>

<p><img class="center" alt="Problem statement" src="/res/puzzles/mjshout_2015_07/pawns.png" /></p>

<p>A simple statement opening on an interesting question. This is the usual type of puzzles that you can encounter during a MathsJam evening.</p>

<p>In the rest of the post, I would like to present you a way to attack this puzzle, and to show that even though an event like MathsJam might sound scary (why would people meet and do math, are they insane?), it’s actually a good opportunity to use different skills.</p>

<p>The problem requires <em>basic math knowledge, combinatorics, intuition, and optional programming skills</em> in order to experimentally verify the solution.
It is also a good opportunity to use the power of Wolfram Alpha to simplify formulas and make some calculations faster.</p>

<div class="alert alert-warning bigger" role="alert">
Now is time to try to solve it by yourself, if you want of course.
</div>

<h2 id="walktrough">Walktrough</h2>

<h3 id="strategy">Strategy</h3>

<p>For the <a href="http://www.jtp.io/2015/06/19/solving-schoenbrunn-math-puzzle.html">last puzzle</a>, we first found a solution manually, and then worked out a computer program to find the answer faster.</p>

<p>This time, we will find the correct answer <em>manually</em> (with maths, pen and paper), and use a program to experimentally verify the results.
We will solve the general case for a <script type="math/tex"> n*m </script> board.</p>

<p>This puzzle involves counting the number of possible squares that can be formed when putting four random pawns on a <script type="math/tex"> n*m </script> board.
Knowing that value, it is possible to calculate the probability of forming square:</p>

<script type="math/tex; mode=display">
p_{square} = \frac{\text{number of ways to form a square in a n*m board}}{\text{number of ways to put 4 pawns on a n*m board}}
</script>

<p>The denominator corresponds to the number of ways to choose four pawns on a chess <script type="math/tex"> n*m </script> chessboard: <script type="math/tex"> \binom{n*m}{4} </script>.</p>

<p>The nominator is the value we are looking for. Let’s call it <strong>S</strong>.</p>

<p>The probability becomes:</p>

<script type="math/tex; mode=display">
p_{square} = \frac{S}{\binom{n*m}{4}}
</script>

<h3 id="counting-the-squares">Counting the squares</h3>
<p>The following approach will follow <strong>more an intuitive way than a rigorous proof</strong>. The idea is to see what is happening and to establish a formula based on observations.</p>

<p>Let’s take an example. We start with a square located in the top-left corner of the chessboard, with a “side” equal to 5 for example. 5 represents in that case the <strong>number of tiles</strong>, but and not the actual length (the length is not important).</p>

<p>For each position of the square, we move the four vertexes of the square by one unit on each edge. We can do that only 4 times since it is a square of side 5. The 5th configuration is the same as the starting one. Each rotation generate a new square, tilted, which has a different side (but it doesn’t matter).</p>

<p>The next iteration is to move one step to the right, and repeat. At the end of a row, move one step down and repeat. Stop after reaching the end of the chessboard.</p>

<p>All of these translations and rotations generate all the squares based on an <strong>original square of side</strong> 5. But there are many other squares of different side length. The smallest original square has a side of 2 and the largest 8. To count all the squares, the steps above must be repeated for a side length going from 2 to 8.</p>

<p><img class="center" alt="Problem statement" src="/res/puzzles/mjshout_2015_07/example_1.png" /></p>

<p>By using <script type="math/tex"> n </script> for the width and <script type="math/tex"> m </script> for the height, and <script type="math/tex"> i </script> for the length of the side, we can rewrite it for the general case with one formula:</p>

<script type="math/tex; mode=display">
S = \sum_{i=2}^{min(n,m)} (n-i+1)(m-i+1)(i-1)
</script>

<p>The sum goes for <script type="math/tex"> i </script> from <script type="math/tex"> 2 </script> (not smaller otherwise we can’t define a square), up to <script type="math/tex"> min(n,m) </script>. If <script type="math/tex"> n > m </script> for example, the square of side <script type="math/tex"> n </script> will be too big for the board, so the maximum size has to be the minimum of <script type="math/tex"> n </script> and <script type="math/tex"> m </script>.</p>

<p>With the help of <a href="https://www.wolframalpha.com/">Wolfram Alpha</a>, we can simplify the formula for both cases:</p>

<p>For <a href="http://www.wolframalpha.com/input/?i=sum+of+%28%28n-i%2B1%29*%28m-i%2B1%29*%28i-1%29%29+for+i+from+2+to+n">min(n, m) = n</a>:</p>

<script type="math/tex; mode=display"> S = \frac{1}{12}n(n^2-1)(2m - n) </script>

<p>For <a href="http://www.wolframalpha.com/input/?i=sum+of+%28%28n-i%2B1%29*%28m-i%2B1%29*%28i-1%29%29+for+i+from+2+to+m">min(n, m) = m</a>:</p>

<script type="math/tex; mode=display"> S = -\frac{1}{12}m(m^2-1)(m-2n) </script>

<p><a href="http://www.wolframalpha.com/input/?i=%28sum+of+%28%28n-i%2B1%29*%28n-i%2B1%29*%28i-1%29%29+for+i+from+2+to+n%29+%2F+%28n%5E2+choose+4%29">Putting it all together</a> for <script type="math/tex"> n = m </script> for the case of the chessboard:</p>

<script type="math/tex; mode=display"> p_{square} = \frac{\frac{1}{12}n^2(n^2-1)}{\binom{n^2}{4}} = \frac{2}{(n^2-3)(n^2-2)}  </script>

<p>Applying for <a href="http://www.wolframalpha.com/input/?i=2%2F%28%28-3%2Bn%5E2%29+%28-2%2Bn%5E2%29%29+for+n+%3D+8">n = 8</a>:</p>

<script type="math/tex; mode=display"> p_{square} = \frac{2}{(8^2-3)(8^2-2)} = \frac{1}{1891} \approx{0.0005288} \approx{0.053}\%   </script>

<h3 id="verifying-with-a-program">Verifying with a program</h3>
<p>Now that we have a formula valid for the general case, it would be interesting to experimentally verify its validity with a program.</p>

<ol>
  <li>Define the parameters n and m (8 and 8 for example)</li>
  <li>Put 4 pawns randomly on the board. The 4 pawns have to be placed at different positions.</li>
  <li>Determine whether the pawns form a square or not. If yes, count that round as successful.</li>
  <li>Repeat from step 2, a lot of times.</li>
  <li>The probability is obtained by dividing the number of successful attempts (forming a square) by the number of total iterations.</li>
</ol>

<p>This scenario can be easily implemented in Python.</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">random</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>

<span class="c"># The size of the board</span>
<span class="n">N</span> <span class="o">=</span> <span class="mi">8</span>
<span class="n">M</span> <span class="o">=</span> <span class="mi">8</span>

<span class="c"># One round consists of placing 4 pawns randomly on a board.</span>
<span class="k">def</span> <span class="nf">round</span><span class="p">():</span>
    <span class="n">points</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">:</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">N</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">M</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">p</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">points</span><span class="p">:</span>
            <span class="n">points</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


    <span class="n">dists</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">points</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">points</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">p</span> <span class="o">!=</span> <span class="n">v</span><span class="p">:</span>
                <span class="n">dists</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>

    <span class="n">c</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">Counter</span><span class="p">(</span><span class="n">dists</span><span class="p">))</span>
    <span class="c"># Square if there are exactly 2 different distances</span>
    <span class="c"># and one should be double the other (since we talk in squares</span>
    <span class="c"># and not actual ditances)</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="o">*</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">or</span> <span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="o">*</span><span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

<span class="n">T</span><span class="p">,</span> <span class="n">s</span> <span class="o">=</span> <span class="mi">1000000</span><span class="p">,</span> <span class="mi">0</span>
<span class="c"># Repeat many times</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">T</span><span class="p">):</span>
    <span class="n">square</span> <span class="o">=</span> <span class="nb">round</span><span class="p">()</span>
    <span class="n">s</span> <span class="o">+=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">square</span> <span class="k">else</span> <span class="mi">0</span>

<span class="k">print</span> <span class="p">(</span><span class="s">&#39;Probablity to form a square:&#39;</span><span class="p">,</span> <span class="n">s</span> <span class="o">/</span> <span class="n">T</span><span class="p">)</span></code></pre></div>

<p>Which outputs:</p>

<div class="highlight"><pre><code class="language-text" data-lang="text">Probablity to form a square: 0.000518</code></pre></div>

<p>The value is pretty close to the calculated one. Of course it is not exactly equal, and running the program again would output a different value. But it is approximately equal, and it is a good way to verify that the <strong>order of magnitude is good correct</strong>.</p>

<h2 id="conclusion">Conclusion</h2>
<p>Once again, nice puzzle, without having to be too complicated.
Even though in the beginning I had no idea what probability to expect for a 8x8 chess board, I have to admit I am a bit surprised by how low the value is.</p>

<p>The formula says that the chances become smaller and smaller as <script type="math/tex"> n </script> and <script type="math/tex"> m </script> get bigger. This could be visualized by plotting a 3D representation of the formula and looking at the shape generated.</p>

<p>Still, it is once again enjoyable to mix both pure math and computer science for fun.</p>

<p>Some might say these kind of puzzles are completely useless. Yet I found them of interest.</p>

<p>Ask someone: “What do you think is the chance of forming a square by placing four pawns randomly on a chess board?”.
It could be amusing to see if the predictions are close the real number or not.</p>


<div id="disqus_thread"></div>

<script type="text/javascript">
    var disqus_shortname = 'jtzp4'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

  </div>
</div>

<hr>

  <div class="row col-md-12 col-xs-18 col-sm-12">
    <p><small>By <a href="#top">Jeremy Tuloup</a> &ndash; 2015 &ndash; Theme by <a href="http://bootswatch.com/">bootswatch</a> </small></p>
  </div>

  </div> <!-- /container -->

  <script src="//code.jquery.com/jquery-1.10.2.min.js"></script>
  <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>

  <script src="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.3.0/katex.min.js"></script>

  <script>
    var scripts = document.getElementsByTagName("script");
    for (var i = 0; i < scripts.length; i++) {
      /* TODO: keep going after an individual parse error. */
      var script = scripts[i];
      if (script.type.match(/^math\/tex/)) {
        var text = script.text === "" ? script.innerHTML : script.text;
        var options = script.type.match(/mode\s*=\s*display/) ?
                      {displayMode: true} : {};
        script.insertAdjacentHTML("beforebegin",
                                  katex.renderToString(text, options));
      }
    }
    document.body.className += " math_finished";
  </script>

  <script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
  </script>

  <script type="text/javascript">
    try {
      var pageTracker = _gat._getTracker("UA-51952511-1");
      pageTracker._trackPageview();
    } catch(err) {}
  </script>

  </body>
</html>
